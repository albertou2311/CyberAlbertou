#!/bin/bash

# Kullanım: ./full_pentest.sh hedefsite.com

target=$1

if [ -z "$target" ]; then
    echo "Kullanım: $0 hedefsite.com"
    exit 1
fi

echo "[*] Hedef: $target"
loot_dir="loot/$target"
mkdir -p "$loot_dir"

echo "[*] Nmap port taraması başlatılıyor..."
nmap -sV -sC -T4 -Pn $target -oN "$loot_dir/nmap.txt"

echo "[*] Web teknolojisi tanımlanıyor (WhatWeb)..."
whatweb $target > "$loot_dir/whatweb.txt"

echo "[*] SSL taraması yapılıyor..."
sslscan $target > "$loot_dir/sslscan.txt"

echo "[*] WAF kontrolü (wafw00f)..."
wafw00f $target > "$loot_dir/waf.txt"

echo "[*] WHOIS bilgisi çekiliyor..."
whois $target > "$loot_dir/whois.txt"

echo "[*] DNS bilgisi çekiliyor..."
dig $target any +noall +answer > "$loot_dir/dns.txt"

echo "[*] theHarvester ile bilgi toplama..."
theHarvester -d $target -b all > "$loot_dir/theHarvester.txt"

echo "[*] Websitenin ekran görüntüsü alınıyor..."
webscreenshot -i $target -o "$loot_dir/screenshots" > /dev/null

echo "[✔] Pentest tamamlandı. Sonuçlar loot/$target dizininde."
