# modules/ai_suggestions.py
import json

def ai_analyze(target):
    print(f"\nğŸ¤– [AI Analiz] Hedef: {target}")

    try:
        with open(f"reports/{target.replace('.', '_')}_log.json", "r") as f:
            data = json.load(f)

        brute = data.get("brute_force", {})
        ports = data.get("open_ports", [])
        payloads = data.get("payloads", {})
        exploits = data.get("exploits", {})

        print("\nğŸ§  [Yorum]:")
        if brute.get("success"):
            print("âœ… Brute-force baÅŸarÄ±lÄ± oldu. EriÅŸim saÄŸlandÄ±.")
        else:
            print("âŒ Brute-force baÅŸarÄ±sÄ±z. KullanÄ±cÄ±/parola kombinasyonlarÄ±nÄ± geniÅŸletin.")

        if ports:
            print(f"ğŸŸ¢ AÃ§Ä±k Portlar: {ports}")
        else:
            print("ğŸ”’ Portlar filtrelenmiÅŸ veya kapalÄ±.")

        if "sql" in payloads and payloads["sql"]:
            print("ğŸš¨ SQL Injection tespit edildi!")
        if "xss" in payloads and payloads["xss"]:
            print("âš  XSS aÃ§Ä±klarÄ± bulundu.")
        if "lfi" in payloads and payloads["lfi"]:
            print("ğŸ“‚ LFI aÃ§Ä±ÄŸÄ± mevcut.")

        if exploits.get("success"):
            print("ğŸ’¥ Exploit baÅŸarÄ±lÄ±. EriÅŸim veya shell elde edildi!")
        else:
            print("ğŸ›  Exploit baÅŸarÄ±sÄ±z. Manuel test Ã¶nerilir.")

        print("\nğŸ“Œ [Ã–neriler]:")
        if not brute.get("success"):
            print("- Hydra veya Medusa ile geniÅŸletilmiÅŸ parola saldÄ±rÄ±sÄ± deneyin.")
        if not exploits.get("success"):
            print("- ExploitDB ve metasploit modÃ¼lleri ile manuel tarama yapÄ±n.")

    except Exception as e:
        print(f"[AI] Hata: {e}")
